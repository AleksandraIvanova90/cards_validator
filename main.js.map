{"version":3,"file":"main.js","mappings":"yBAEA,MAAMA,EAAUC,SAASC,cAAc,YAC1B,ICDN,MACLC,WAAAA,CAAYC,GACVC,KAAKD,SAAWA,EAChBC,KAAKC,QAAUD,KAAKD,SAASF,cAAc,gBAC3CG,KAAKE,MAAQF,KAAKC,QAAQJ,cAAc,iBAExCG,KAAKG,SAAWH,KAAKG,SAASC,KAAKJ,MACnCA,KAAKK,QAAUL,KAAKK,QAAQD,KAAKJ,MAEjCA,KAAKC,QAAQK,iBAAiB,SAAUN,KAAKG,UAC7CH,KAAKE,MAAMI,iBAAiB,QAASN,KAAKK,QAC5C,CACAE,KAAAA,GACE,MAAMC,EAAQR,KAAKD,SAASU,iBAAiB,SAE7C,IAAK,MAAMC,KAASF,EAClBG,QAAQC,IAAIF,GACZA,EAAMG,UAAUC,OAAO,YAE3B,CAEAX,QAAAA,CAASY,GACPA,EAAEC,iBAEF,MAAMC,EAAQjB,KAAKE,MAAMe,MACzB,GC3BG,SAAuBA,GAK5B,IAHA,IAAIC,EAAS,EACTC,GAAQ,EAEHC,GAJTH,EAAQA,EAAMI,QAAQ,MAAO,KAIVC,OAAS,EAAGF,GAAK,EAAGA,IAAK,CAC1C,IAAIG,EAASC,SAASP,EAAMQ,OAAOL,GAAI,IAEnCD,IAAUI,GAAU,GAAK,IAC3BA,GAAU,GAGZL,GAAUK,EACVJ,GAASA,CACX,CACA,OAAOD,EAAS,IAAM,CACxB,CDWQQ,CAAcT,GAAQ,CACxB,MAAMU,ECVL,SAA0BV,GAC/B,MAAMW,EAAcX,EAAM,GACpBY,EAAeZ,EAAM,GAC3B,IAAIa,EAiCJ,MAhCe,CACb,CAAC,IAAK,OACN,CAAC,IAAK,QACN,CAAC,IAAK,UACN,CAAC,IAAK,YACN,CACE,IACA,CACE,CAAC,IAAK,QACN,CAAC,IAAK,QACN,CAAC,IAAK,OACN,CAAC,IAAK,OACN,CAAC,IAAK,eACN,CAAC,IAAK,eACN,CAAC,IAAK,kBAILC,SAAQ,SAAUC,GACnBJ,GAAeI,EAAS,KACP,KAAfJ,EACcI,EAAS,GACjBD,SAAQ,SAAUE,GACpBJ,GAAgBI,EAAK,KACvBH,EAASG,EAAK,GAElB,IAEAH,EAASE,EAAS,GAGxB,IACOF,CACT,CD3BuBI,CAAiBjB,GAClCN,QAAQC,IAAIe,GC4BX,SAAqBV,GACZkB,MAAMC,KAAKxC,SAASa,iBAAiB,UAC7CsB,SAASM,IACAA,EAAKC,UAAUC,SAAStB,IAEnCoB,EAAKxB,UAAU2B,IAAI,YACrB,GAEJ,CDnCMC,CAAYd,EACd,CACF,CAEAtB,OAAAA,CAAQU,GACFA,EAAE2B,QACQP,MAAMC,KAAKpC,KAAKD,SAASU,iBAAiB,UAChDsB,SAASM,IACAA,EAAKC,UAAUC,SAAS,cAEnCF,EAAKxB,UAAUC,OAAO,YACxB,GAGN,GDzC6BnB,E","sources":["webpack://credit_card_validator/./src/js/app.js","webpack://credit_card_validator/./src/js/widget.js","webpack://credit_card_validator/./src/js/validators.js"],"sourcesContent":["import { InnFormWidget } from \"./widget.js\";\n\nconst content = document.querySelector(\".content\");\nconst form = new InnFormWidget(content);\n","import { changingDOM, getPaymentSystem, luhnAlgorithm } from \"./validators.js\";\n\nexport class InnFormWidget {\n  constructor(parentEl) {\n    this.parentEl = parentEl;\n    this.element = this.parentEl.querySelector(\".form-inline\");\n    this.input = this.element.querySelector(\".form-control\");\n\n    this.onSubmit = this.onSubmit.bind(this);\n    this.onInput = this.onInput.bind(this);\n\n    this.element.addEventListener(\"submit\", this.onSubmit);\n    this.input.addEventListener(\"input\", this.onInput);\n  }\n  clear() {\n    const items = this.parentEl.querySelectorAll(\"cards\");\n\n    for (const child of items) {\n      console.log(child);\n      child.classList.remove(\"cdisabled\");\n    }\n  }\n\n  onSubmit(e) {\n    e.preventDefault();\n\n    const value = this.input.value;\n    if (luhnAlgorithm(value)) {\n      const cardName = getPaymentSystem(value);\n      console.log(cardName);\n      changingDOM(cardName);\n    }\n  }\n\n  onInput(e) {\n    if (e.target) {\n      let cards = Array.from(this.parentEl.querySelectorAll(\".card\"));\n      cards.forEach((card) => {\n        const mark = card.className.includes(\"cdisabled\");\n        if (mark) {\n          card.classList.remove(\"cdisabled\");\n        }\n      });\n    }\n  }\n}\n","export function luhnAlgorithm(value) {\n  value = value.replace(/\\D/g, \"\");\n  var nCheck = 0;\n  var bEven = false;\n\n  for (var n = value.length - 1; n >= 0; n--) {\n    var nDigit = parseInt(value.charAt(n), 10);\n\n    if (bEven && (nDigit *= 2) > 9) {\n      nDigit -= 9;\n    }\n\n    nCheck += nDigit;\n    bEven = !bEven;\n  }\n  return nCheck % 10 == 0;\n}\n\nexport function getPaymentSystem(value) {\n  const firstNumber = value[0];\n  const secondNumber = value[1];\n  let result;\n  const paySys = [\n    [\"2\", \"mir\"],\n    [\"4\", \"visa\"],\n    [\"5\", \"master\"],\n    [\"6\", \"discover\"],\n    [\n      \"3\",\n      [\n        [\"4\", \"amex\"],\n        [\"7\", \"amex\"],\n        [\"1\", \"jcb\"],\n        [\"5\", \"jcb\"],\n        [\"0\", \"diners_club\"],\n        [\"6\", \"diners_club\"],\n        [\"8\", \"diners_club\"],\n      ],\n    ],\n  ];\n  paySys.forEach(function (elements) {\n    if (firstNumber == elements[0]) {\n      if (firstNumber == \"3\") {\n        const element = elements[1];\n        element.forEach(function (part) {\n          if (secondNumber == part[0]) {\n            result = part[1];\n          }\n        });\n      } else {\n        result = elements[1];\n      }\n    }\n  });\n  return result;\n}\n\nexport function changingDOM(value) {\n  const cards = Array.from(document.querySelectorAll(\".card\"));\n  cards.forEach((card) => {\n    const mark = card.className.includes(value);\n    if (!mark) {\n      card.classList.add(\"cdisabled\");\n    }\n  });\n}\n"],"names":["content","document","querySelector","constructor","parentEl","this","element","input","onSubmit","bind","onInput","addEventListener","clear","items","querySelectorAll","child","console","log","classList","remove","e","preventDefault","value","nCheck","bEven","n","replace","length","nDigit","parseInt","charAt","luhnAlgorithm","cardName","firstNumber","secondNumber","result","forEach","elements","part","getPaymentSystem","Array","from","card","className","includes","add","changingDOM","target"],"sourceRoot":""}